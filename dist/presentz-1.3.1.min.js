(function(){"use strict";var BlipTv,Html5Video,IFrameSlide,ImgSlide,NoSlide,Presentz,RvlIO,SambatechPlugin,SlideShare,SlideShareOEmbed,SpeakerDeck,SwfSlide,Video,Vimeo,WistiaPlugin,Youtube,root,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty;SambatechPlugin=function(){var IFRAME_API;IFRAME_API="http://player.sambatech.com.br/v2current/samba.player.api.js/media/js/api/samba.player.api.parent.js";function SambatechPlugin(presentz1,videoContainer1,width1,height1){this.presentz=presentz1;this.videoContainer=videoContainer1;this.width=width1;this.height=height1;this.handleEvent=bind(this.handleEvent,this);this.video=new Video(["play"],["pause"],["end"],this.presentz);this.elementId=this.presentz.newElementName();this.videoData=null;this.time=0}SambatechPlugin.prototype.ensureSambatechIframeAPILoaded=function(callback){var $scripts,firstScriptTag,script;if(jQuery('script[src="'+IFRAME_API+'"]').length===0){script=document.createElement("script");script.type="text/javascript";script.setAttribute("samba-player-api","player");script.setAttribute("name","samba-player-api");script.onload=callback;script.src=IFRAME_API;$scripts=jQuery("script");if($scripts.length===0){jQuery(this.videoContainer)[0].appendChild(script)}else{firstScriptTag=$scripts[0];firstScriptTag.parentNode.insertBefore(script,firstScriptTag)}}else{callback()}};SambatechPlugin.prototype.changeVideo=function(videoData,wouldPlay1){this.wouldPlay=wouldPlay1;this.videoData=videoData;return this.ensureSambatechIframeAPILoaded(function(_this){return function(){root.videoSamba=_this.video;root.wouldPlaySamba=_this.wouldPlay;_this.player=new SambaPlayer("player_video",{height:_this.height,width:_this.width,ph:_this.playerKey(videoData),m:_this.videoId(videoData),events:{onLoad:"onLoadSamba",onStart:"onStartSamba",onPause:"onPauseSamba",onFinish:"onFinishedSamba",onResume:"onStartSamba"}})}}(this))};SambatechPlugin.prototype.videoId=function(videoData){var id,lowercaseUrl;lowercaseUrl=videoData.url.toLowerCase();id=videoData.url;if(lowercaseUrl.indexOf("http://player.sambatech.com.br/current/samba-player.js")!==-1){id=id.substr(id.indexOf("m=")+2);if(id.indexOf("&")!==-1){id=id.substr(0,id.indexOf("&"))}}return id};SambatechPlugin.prototype.playerKey=function(videoData){var id,lowercaseUrl;lowercaseUrl=videoData.url.toLowerCase();id=videoData.url;if(lowercaseUrl.indexOf("http://player.sambatech.com.br/current/samba-player.js")!==-1){id=id.substr(id.indexOf("ph=")+3);if(id.indexOf("&")!==-1){id=id.substr(0,id.indexOf("&"))}}return id};SambatechPlugin.prototype.handleEvent=function(event){this.video.handleEvent(event.data)};SambatechPlugin.prototype.handle=function(video){var lowerCaseUrl;lowerCaseUrl=video.url.toLowerCase();return lowerCaseUrl.indexOf("http://player.sambatech.com.br/current/samba-player.js")!==-1};SambatechPlugin.prototype.currentTime=function(){return 0};SambatechPlugin.prototype.skipTo=function(time,wouldPlay){var ref;if(wouldPlay==null){wouldPlay=false}if(((ref=this.player)!=null?ref.seek:void 0)!=null){if(wouldPlay||this.isPaused()){this.player.seek(time)}if(wouldPlay){this.player.play()}true}return false};SambatechPlugin.prototype.pause=function(){return this.player.pause()};SambatechPlugin.prototype.isPaused=function(){return this.video.isInPauseState};SambatechPlugin.prototype.onStartSamba=function(){return videoSamba.handleEvent("play")};SambatechPlugin.prototype.onPauseSamba=function(){return videoSamba.handleEvent("pause")};SambatechPlugin.prototype.onFinishedSamba=function(){return videoSamba.handleEvent("end")};SambatechPlugin.prototype.onLoadSamba=function(){if(wouldPlaySamba){return videoSamba.play()}};return SambatechPlugin}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.SambatechPlugin=SambatechPlugin;root.onStartSamba=SambatechPlugin.prototype.onStartSamba;root.onPauseSamba=SambatechPlugin.prototype.onPauseSamba;root.onFinishedSamba=SambatechPlugin.prototype.onFinishedSamba;root.onLoadSamba=SambatechPlugin.prototype.onLoadSamba;root.videoSamba=null;root.wouldPlaySamba=null;WistiaPlugin=function(){var IFRAME_API;IFRAME_API="//fast.wistia.com/assets/external/E-v1.js";function WistiaPlugin(presentz1,videoContainer1,width1,height1){this.presentz=presentz1;this.videoContainer=videoContainer1;this.width=width1;this.height=height1;this.handleEvent=bind(this.handleEvent,this);this.onReady=bind(this.onReady,this);this.video=new Video(["play"],["pause"],["end"],this.presentz);this.elementId=this.presentz.newElementName()}WistiaPlugin.prototype.ensureWistiaIframeAPILoaded=function(callback){var $scripts,firstScriptTag,script;if(jQuery('script[src="'+IFRAME_API+'"]').length===0){script=document.createElement("script");script.type="text/javascript";script.src=IFRAME_API;script.onload=callback;$scripts=jQuery("script");if($scripts.length===0){jQuery(this.videoContainer)[0].appendChild(script)}else{firstScriptTag=$scripts[0];firstScriptTag.parentNode.insertBefore(script,firstScriptTag)}}else{callback()}};WistiaPlugin.prototype.changeVideo=function(videoData,wouldPlay1){this.wouldPlay=wouldPlay1;jQuery(this.videoContainer).append("<div id='wistia_"+this.videoId(videoData)+"' class='wistia_embed' style='width:"+this.width+"px;height:"+this.height+"px;'>&nbsp;</div>");return this.ensureWistiaIframeAPILoaded(function(_this){return function(){var video;jQuery(_this.videoContainer).append('<div id="'+_this.elementId+'"></div>');_this.player=Wistia.embed(_this.videoId(videoData),{version:"v1",videoWidth:_this.width,videoHeight:_this.height,playerColor:"688AAD"});_this.player.bind("ready",function(){return this.onReady});video=_this.video;_this.player.bind("play",function(){return video.handleEvent("play")});_this.player.bind("pause",function(){return video.handleEvent("pause")});_this.player.bind("end",function(){return video.handleEvent("end")})}}(this))};WistiaPlugin.prototype.videoId=function(videoData){var id,lowercaseUrl;lowercaseUrl=videoData.url.toLowerCase();id=videoData.url;if(lowercaseUrl.indexOf("//www.wistia.com/")!==-1){id=id.substr(id.lastIndexOf("/")+1);if(id.indexOf("?")!==-1){id=id.substr(0,id.indexOf("?"))}}return id};WistiaPlugin.prototype.onReady=function(){if(this.wouldPlay){return this.play()}};WistiaPlugin.prototype.handleEvent=function(event){this.video.handleEvent(event.data)};WistiaPlugin.prototype.handle=function(video){var lowerCaseUrl;lowerCaseUrl=video.url.toLowerCase();return lowerCaseUrl.indexOf("//www.wistia.com/")!==-1};WistiaPlugin.prototype.currentTime=function(){var ref;if(((ref=this.player)!=null?ref.time:void 0)!=null){return this.player.time()}return 0};WistiaPlugin.prototype.skipTo=function(time,wouldPlay){var ref;if(wouldPlay==null){wouldPlay=false}if(((ref=this.player)!=null?ref.seekTo:void 0)!=null){if(wouldPlay||this.isPaused()){this.player.seekTo(time,true)}if(wouldPlay){this.play()}true}return false};WistiaPlugin.prototype.play=function(){return this.player.playVideo()};WistiaPlugin.prototype.pause=function(){return this.player.pauseVideo()};WistiaPlugin.prototype.isPaused=function(){return this.video.isInPauseState};return WistiaPlugin}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.WistiaPlugin=WistiaPlugin;Video=function(){function Video(playStates,pauseStates,finishStates,presentz1){this.playStates=playStates;this.pauseStates=pauseStates;this.finishStates=finishStates;this.presentz=presentz1;this.isInPauseState=true}Video.prototype.handleEvent=function(event){var i,len,listener,listeners;this.isInPlayState=indexOf.call(this.playStates,event)>=0;this.isInPauseState=indexOf.call(this.pauseStates,event)>=0||!this.isInPlayState;this.isInFinishState=indexOf.call(this.finishStates,event)>=0;if(this.isInPlayState){this.presentz.startTimeChecker();listeners=this.presentz.listeners.play}else if(this.isInPauseState||this.isInFinishState){this.presentz.stopTimeChecker();if(this.isInPauseState){listeners=this.presentz.listeners.pause}else if(this.isInFinishState){listeners=this.presentz.listeners.finish}}if(listeners!=null){for(i=0,len=listeners.length;i<len;i++){listener=listeners[i];listener()}}if(this.isInFinishState&&this.presentz.currentChapterIndex<this.presentz.presentation.chapters.length-1){this.presentz.changeChapter(this.presentz.currentChapterIndex+1,0,true)}};return Video}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.Video=Video;Html5Video=function(){function Html5Video(presentz1,videoContainer1,width1,height1){this.presentz=presentz1;this.videoContainer=videoContainer1;this.width=width1;this.height=height1;this.video=new Video(["play"],["pause"],["ended"],this.presentz);this.elementId=this.presentz.newElementName()}Html5Video.prototype.handle=function(video){return true};Html5Video.prototype.changeVideo=function(videoData,wouldPlay1){var $videoContainer,playerOptions;this.wouldPlay=wouldPlay1;$videoContainer=jQuery(this.videoContainer);$videoContainer.empty();$videoContainer.append('<video id="'+this.elementId+'" controls preload="none" src="'+videoData.url+'" width="100%" height="100%"></video>');playerOptions={timerRate:500,success:function(_this){return function(me){_this.onPlayerLoaded(me)}}(this)};new MediaElementPlayer("#"+this.elementId,playerOptions)};Html5Video.prototype.onPlayerLoaded=function(player1){var eventHandler;this.player=player1;eventHandler=function(_this){return function(event){_this.video.handleEvent(event.type)}}(this);this.player.addEventListener("play",eventHandler,false);this.player.addEventListener("pause",eventHandler,false);this.player.addEventListener("ended",eventHandler,false);this.player.load();if(this.wouldPlay){this.play()}};Html5Video.prototype.currentTime=function(){return this.player.currentTime};Html5Video.prototype.skipTo=function(time,wouldPlay){if(wouldPlay==null){wouldPlay=false}if(this.player!=null&&this.player.currentTime>0){this.player.setCurrentTime(time);if(wouldPlay){this.play()}true}return false};Html5Video.prototype.play=function(){return this.player.play()};Html5Video.prototype.pause=function(){return this.player.pause()};Html5Video.prototype.isPaused=function(){return this.video.isInPauseState};return Html5Video}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.Html5Video=Html5Video;Vimeo=function(){function Vimeo(presentz1,videoContainer1,width1,height1){this.presentz=presentz1;this.videoContainer=videoContainer1;this.width=width1;this.height=height1;this.receiveVideoInfo=bind(this.receiveVideoInfo,this);this.video=new Video(["play"],["pause"],["finish"],this.presentz);this.wouldPlay=false;this.currentTimeInSeconds=0;this.vimeoCallbackFunctionName=this.presentz.newElementName("callback");if(typeof window!=="undefined"&&window!==null){window[this.vimeoCallbackFunctionName]=this.receiveVideoInfo}this.elementId=this.presentz.newElementName()}Vimeo.prototype.changeVideo=function(videoData1,wouldPlay1){var ajaxCall;this.videoData=videoData1;this.wouldPlay=wouldPlay1;ajaxCall={url:"//vimeo.com/api/v2/video/"+this.videoId(this.videoData)+".json",dataType:"jsonp",jsonpCallback:this.vimeoCallbackFunctionName};jQuery.ajax(ajaxCall)};Vimeo.prototype.videoId=function(videoData){var id;id=videoData.url;id=id.substr(id.lastIndexOf("/")+1);if(id.indexOf("?")!==-1){id=id.substr(0,id.indexOf("?"))}return id};Vimeo.prototype.receiveVideoInfo=function(data){var iframe,movieUrl,onReady,videoHtml;movieUrl="//player.vimeo.com/video/"+this.videoId(this.videoData)+"?api=1&player_id="+this.elementId;if(jQuery("#"+this.elementId).length===0){videoHtml='<iframe id="'+this.elementId+'" src="'+movieUrl+'" width="'+this.width+'" height="'+this.height+'" frameborder="0"></iframe>';jQuery(this.videoContainer).append(videoHtml);iframe=jQuery("#"+this.elementId)[0];onReady=function(_this){return function(id){_this.onReady(id)}}(this);$f(iframe).addEvent("ready",onReady)}else{iframe=jQuery("#"+this.elementId)[0];iframe.src=movieUrl}};Vimeo.prototype.handle=function(video){return video.url.toLowerCase().indexOf("//vimeo.com/")!==-1};Vimeo.prototype.onReady=function(id){this.player=$f(id);this.player.addEvent("play",function(_this){return function(){_this.video.handleEvent("play")}}(this));this.player.addEvent("pause",function(_this){return function(){_this.video.handleEvent("pause")}}(this));this.player.addEvent("finish",function(_this){return function(){_this.video.handleEvent("finish")}}(this));this.player.addEvent("playProgress",function(_this){return function(data){_this.currentTimeInSeconds=data.seconds}}(this));this.player.addEvent("loadProgress",function(_this){return function(data){_this.loadedTimeInSeconds=parseInt(parseFloat(data.duration)*parseFloat(data.percent))}}(this));if(this.wouldPlay){this.wouldPlay=false;this.play()}};Vimeo.prototype.currentTime=function(){return this.currentTimeInSeconds};Vimeo.prototype.skipTo=function(time,wouldPlay){if(wouldPlay==null){wouldPlay=false}if(time<=this.loadedTimeInSeconds){this.player.api("seekTo",time+2);if(wouldPlay){this.play()}true}return false};Vimeo.prototype.play=function(){return this.player.api("play")};Vimeo.prototype.pause=function(){return this.player.api("pause")};Vimeo.prototype.isPaused=function(){return this.video.isInPauseState};return Vimeo}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.Vimeo=Vimeo;Youtube=function(){var IFRAME_API;IFRAME_API="//www.youtube.com/iframe_api";function Youtube(presentz1,videoContainer1,width1,height1){this.presentz=presentz1;this.videoContainer=videoContainer1;this.width=width1;this.height=height1;this.handleEvent=bind(this.handleEvent,this);this.onReady=bind(this.onReady,this);this.video=new Video([1],[-1,2],[0],this.presentz);this.elementId=this.presentz.newElementName()}Youtube.prototype.ensureYoutubeIframeAPILoaded=function(callback){var $scripts,firstScriptTag,script;if(jQuery('script[src="'+IFRAME_API+'"]').length===0){script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=IFRAME_API;$scripts=jQuery("script");if($scripts.length===0){jQuery(this.videoContainer)[0].appendChild(script)}else{firstScriptTag=$scripts[0];firstScriptTag.parentNode.insertBefore(script,firstScriptTag)}window.onYouTubeIframeAPIReady=function(){return callback()}}else{callback()}};Youtube.prototype.changeVideo=function(videoData,wouldPlay1){this.wouldPlay=wouldPlay1;this.ensureYoutubeIframeAPILoaded(function(_this){return function(){if(jQuery("#"+_this.elementId).length===0){jQuery(_this.videoContainer).append('<div id="'+_this.elementId+'"></div>');_this.player=new YT.Player(_this.elementId,{height:_this.height,width:_this.width,videoId:_this.videoId(videoData),playerVars:{rel:0,wmode:"opaque"},events:{onReady:_this.onReady,onStateChange:_this.handleEvent}})}else{_this.player.cueVideoById(_this.videoId(videoData))}}}(this))};Youtube.prototype.videoId=function(videoData){var id,lowercaseUrl;lowercaseUrl=videoData.url.toLowerCase();id=videoData.url;if(lowercaseUrl.indexOf("//youtu.be/")!==-1){id=id.substr(id.lastIndexOf("/")+1);if(id.indexOf("?")!==-1){id=id.substr(0,id.indexOf("?"))}}else if(lowercaseUrl.indexOf("//youtube.com/")!==-1||lowercaseUrl.indexOf("//www.youtube.com/")!==-1){id=id.substr(id.indexOf("v=")+2);if(id.indexOf("&")!==-1){id=id.substr(0,id.indexOf("&"))}}return id};Youtube.prototype.onReady=function(){if(this.wouldPlay){return this.play()}};Youtube.prototype.handleEvent=function(event){this.video.handleEvent(event.data)};Youtube.prototype.handle=function(video){var lowerCaseUrl;lowerCaseUrl=video.url.toLowerCase();return lowerCaseUrl.indexOf("//youtu.be/")!==-1||lowerCaseUrl.indexOf("//youtube.com/")!==-1||lowerCaseUrl.indexOf("//www.youtube.com/")!==-1};Youtube.prototype.currentTime=function(){var ref;if(((ref=this.player)!=null?ref.getCurrentTime:void 0)!=null){return this.player.getCurrentTime()}return 0};Youtube.prototype.skipTo=function(time,wouldPlay){var ref;if(wouldPlay==null){wouldPlay=false}if(((ref=this.player)!=null?ref.seekTo:void 0)!=null){if(wouldPlay||this.isPaused()){this.player.seekTo(time,true)}if(wouldPlay){this.play()}true}return false};Youtube.prototype.play=function(){return this.player.playVideo()};Youtube.prototype.pause=function(){return this.player.pauseVideo()};Youtube.prototype.isPaused=function(){return this.video.isInPauseState};return Youtube}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.Youtube=Youtube;BlipTv=function(){function BlipTv(presentz1,videoContainer,width,height){this.presentz=presentz1;this.video=new Html5Video(this.presentz,videoContainer,width,height)}BlipTv.prototype.changeVideo=function(videoData,wouldPlay1){var ajaxCall;this.wouldPlay=wouldPlay1;ajaxCall={url:videoData.url,dataType:"jsonp",data:"skin=json",jsonpCallback:"presentz.videoPlugin.receiveVideoInfo"};jQuery.ajax(ajaxCall)};BlipTv.prototype.receiveVideoInfo=function(data){var fakeVideoData;fakeVideoData={url:data[0].Post.media.url};this.video.changeVideo(fakeVideoData,this.wouldPlay);this.player=this.video.player;this.skipTo=this.video.skipTo};BlipTv.prototype.handle=function(video){return video.url.toLowerCase().indexOf("//blip.tv")!==-1};BlipTv.prototype.currentTime=function(){return this.video.currentTime()};BlipTv.prototype.skipTo=function(time,wouldPlay){if(wouldPlay==null){wouldPlay=false}return this.video.skipTo(time,wouldPlay)};BlipTv.prototype.play=function(){return this.video.play()};BlipTv.prototype.pause=function(){return this.video.pause()};return BlipTv}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.BlipTv=BlipTv;ImgSlide=function(){function ImgSlide(presentz1,slideContainer1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.preloadedSlides=[]}ImgSlide.prototype.handle=function(slide){return slide.url!=null};ImgSlide.prototype.changeSlide=function(slide){var $img,$slideContainer;$img=jQuery(this.slideContainer+" img");if($img.length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();$slideContainer.append('<img src="'+slide.url+'"/>')}else{$img.attr("src",slide.url)}};ImgSlide.prototype.preload=function(slide){var image,ref;if(ref=slide.url,indexOf.call(this.preloadedSlides,ref)>=0){return}image=new Image;image.src=slide.url;this.preloadedSlides.push(slide.url)};return ImgSlide}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.ImgSlide=ImgSlide;SlideShare=function(){function SlideShare(presentz1,slideContainer1,width1,height1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.width=width1;this.height=height1;this.currentSlide=0;this.elementId=this.presentz.newElementName();this.swfId=this.presentz.newElementName()}SlideShare.prototype.handle=function(slide){if(slide.url==null){return false}return slide.url.toLowerCase().indexOf("slideshare.net")!==-1};SlideShare.prototype.slideId=function(slide){return slide.url.substr(slide.url.lastIndexOf("/")+1,slide.url.lastIndexOf("#")-1-slide.url.lastIndexOf("/"))};SlideShare.prototype.slideNumber=function(slide){return parseInt(slide.url.substr(slide.url.lastIndexOf("#")+1))};SlideShare.prototype.changeSlide=function(slide){var $slideContainer,$swf,atts,currentSlide,docId,flashvars,nextSlide,params,player;$swf=jQuery("#"+this.swfId);if($swf.length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();$slideContainer.append('<div id="'+this.elementId+'"></div>');docId=this.slideId(slide);params={allowScriptAccess:"always",wmode:"opaque"};atts={id:this.swfId};flashvars={doc:docId,rel:0};swfobject.embedSWF("http://static.slidesharecdn.com/swf/ssplayer2.swf",this.elementId,this.width,this.height,"8",null,flashvars,params,atts);this.currentSlide=0}else{player=$swf[0];nextSlide=this.slideNumber(slide);if(player.getCurrentSlide!=null){currentSlide=player.getCurrentSlide();if(nextSlide===currentSlide+1){player.next()}else{player.jumpTo(this.slideNumber(slide));this.currentSlide=player.getCurrentSlide()}}}};return SlideShare}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.SlideShare=SlideShare;SlideShareOEmbed=function(){function SlideShareOEmbed(presentz1,slideContainer1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.elementId=this.presentz.newElementName();this.preloadedSlides=[];this.slideInfo={}}SlideShareOEmbed.prototype.handle=function(slide){if(slide.url==null){return false}return slide.url.toLowerCase().indexOf("slideshare.net")!==-1&&slide.public_url!=null};SlideShareOEmbed.prototype.slideNumber=function(slide){return parseInt(slide.url.substr(slide.url.lastIndexOf("#")+1))};SlideShareOEmbed.prototype.ensureSlideInfoFetched=function(slidePublicUrl,callback){if(this.slideInfo[slidePublicUrl]!=null){return callback()}jQuery.ajax({url:"//www.slideshare.net/api/oembed/2",data:{url:slidePublicUrl,format:"json"},dataType:"jsonp",success:function(_this){return function(slideinfo){_this.slideInfo[slidePublicUrl]=slideinfo;return callback()}}(this)})};SlideShareOEmbed.prototype.urlOfSlide=function(slide){var slideInfo;slideInfo=this.slideInfo[slide.public_url];if(slideInfo.conversion_version===2){return""+slideInfo.slide_image_baseurl+this.slideNumber(slide)+slideInfo.slide_image_baseurl_suffix}else{return slideInfo.slide_image_baseurl+"-slide-"+this.slideNumber(slide)+slideInfo.slide_image_baseurl_suffix}};SlideShareOEmbed.prototype.changeSlide=function(slide){var $slideContainer;if(jQuery("#"+this.elementId).length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();$slideContainer.append('<div id="'+this.elementId+'"></div>')}this.ensureSlideInfoFetched(slide.public_url,function(_this){return function(){var $img;$img=jQuery("#"+_this.elementId+" img");if($img.length===0){return jQuery("#"+_this.elementId).append('<img src="'+_this.urlOfSlide(slide)+'"/>')}else{return $img.attr("src",_this.urlOfSlide(slide))}}}(this))};SlideShareOEmbed.prototype.preload=function(slide){if(slide.public_url==null){return}this.ensureSlideInfoFetched(slide.public_url,function(_this){return function(){var image,url;url=_this.urlOfSlide(slide);if(indexOf.call(_this.preloadedSlides,url)>=0){return}image=new Image;image.src=url;return _this.preloadedSlides.push(url)}}(this))};return SlideShareOEmbed}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.SlideShareOEmbed=SlideShareOEmbed;SwfSlide=function(){function SwfSlide(presentz1,slideContainer1,width1,height1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.width=width1;this.height=height1;this.preloadedSlides=[];this.elementId=this.presentz.newElementName();this.swfId=this.presentz.newElementName();this.preloadSlideContainerId=this.presentz.newElementName();this.preloadSlideId=this.presentz.newElementName()}SwfSlide.prototype.handle=function(slide){if(slide.url==null){return false}return slide.url.toLowerCase().indexOf(".swf")!==-1};SwfSlide.prototype.changeSlide=function(slide){var $slideContainer,atts,params,swfslide;if(jQuery("#"+this.swfId).length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();$slideContainer.append('<div id="'+this.elementId+'"></div>');params={wmode:"opaque"};atts={id:this.swfId};swfobject.embedSWF(slide.url,this.elementId,this.width,this.height,"8",null,null,params,atts)}else{swfslide=jQuery("#"+this.swfId)[0];swfslide.data=slide.url}};SwfSlide.prototype.preload=function(slide){var atts,ref;if(ref=slide.url,indexOf.call(this.preloadedSlides,ref)>=0){return}jQuery("#"+this.preloadSlideId).remove();jQuery(this.slideContainer).append('<div id="'+this.preloadSlideContainerId+'"></div>');atts={id:""+this.preloadSlideId,style:"visibility: hidden; position: absolute; margin: 0 0 0 0; top: 0;"};swfobject.embedSWF(slide.url,""+this.preloadSlideContainerId,"1","1","8",null,null,null,atts,function(_this){return function(){return _this.preloadedSlides.push(slide.url)}}(this))};return SwfSlide}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.SwfSlide=SwfSlide;SpeakerDeck=function(){function SpeakerDeck(presentz1,slideContainer1,width1,height1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.width=width1;this.height=height1;this.currentSlide=0;this.elementId=this.presentz.newElementName();this.speakerdeckOrigin="*"}SpeakerDeck.prototype.handle=function(slide){if(slide.url==null){return false}return slide.url.toLowerCase().indexOf("speakerdeck.com")!==-1};SpeakerDeck.prototype.changeSlide=function(slide){var $slideContainer,nextSlide,receiveMessage,script,slideId;if(jQuery(this.slideContainer+" iframe.speakerdeck-iframe").length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();slideId=this.slideId(slide);receiveMessage=function(_this){return function(event){var data;if(event.origin.indexOf("speakerdeck.com")===-1){return}_this.speakerdeckOrigin=event.origin;_this.speakerdeck=event.source;data=JSON.parse(event.data);if(data[0]==="change"){return _this.currentSlide=data[1].number}}}(this);window.addEventListener("message",receiveMessage,false);script=document.createElement("script");script.type="text/javascript";script.async=true;script.src="//speakerdeck.com/assets/embed.js";script.setAttribute("class","speakerdeck-embed");script.setAttribute("data-id",slideId);$slideContainer[0].appendChild(script);this.pingInterval=setInterval(function(_this){return function(){var $speakerDeckIframe;$speakerDeckIframe=jQuery(_this.slideContainer+" iframe.speakerdeck-iframe");if($speakerDeckIframe.length>0&&$speakerDeckIframe[0].contentWindow){return _this.speakerdeck=$speakerDeckIframe[0].contentWindow}}}(this),500)}else{if(this.speakerdeck!=null){nextSlide=this.slideNumber(slide);this.speakerdeck.postMessage(JSON.stringify(["goToSlide",nextSlide]),this.speakerdeckOrigin)}else{console.log("no speakerdeck")}}};SpeakerDeck.prototype.slideNumber=function(slide){return parseInt(slide.url.substr(slide.url.lastIndexOf("#")+1))};SpeakerDeck.prototype.slideId=function(slide){return slide.url.substring(slide.url.lastIndexOf("/")+1,slide.url.lastIndexOf("#"))};return SpeakerDeck}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.SpeakerDeck=SpeakerDeck;IFrameSlide=function(){function IFrameSlide(presentz1,slideContainer1){this.presentz=presentz1;this.slideContainer=slideContainer1;this.iframeSelector=this.slideContainer+" iframe.iframe-slide-container"}IFrameSlide.prototype.handle=function(slide){return slide.url!=null};IFrameSlide.prototype.changeSlide=function(slide){var $iframe,$slideContainer;$iframe=jQuery(this.iframeSelector);if($iframe.length===0){$slideContainer=jQuery(this.slideContainer);$slideContainer.empty();$slideContainer.append('<iframe frameborder="0" class="iframe-slide-container" src="'+slide.url+'"></iframe>')}else{$iframe.attr("src",slide.url)}};return IFrameSlide}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.IFrameSlide=IFrameSlide;RvlIO=function(superClass){extend(RvlIO,superClass);function RvlIO(){return RvlIO.__super__.constructor.apply(this,arguments)}RvlIO.prototype.handle=function(slide){if(slide.url==null){return false}return slide.url.toLowerCase().indexOf("rvl.io")!==-1};return RvlIO}(IFrameSlide);root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.RvlIO=RvlIO;NoSlide=function(){function NoSlide(){}NoSlide.prototype.handle=function(slide){return slide.url==null};NoSlide.prototype.changeSlide=function(){};return NoSlide}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.NoSlide=NoSlide;Presentz=function(){var EMPTY_FUNCTION,findSlidePlugin,findVideoPlugin,toWidthHeight;EMPTY_FUNCTION=function(){};toWidthHeight=function(str){var parts,widthHeight;parts=str.split("x");return widthHeight={width:jQuery.trim(parts[0]),height:jQuery.trim(parts[1])}};function Presentz(videoContainer,videoWxH,slideContainer,slideWxH){var sizeOfSlide,sizeOfVideo;sizeOfVideo=toWidthHeight(videoWxH);sizeOfSlide=toWidthHeight(slideWxH);this.availableVideoPlugins={vimeo:new Vimeo(this,videoContainer,sizeOfVideo.width,sizeOfVideo.height),youtube:new Youtube(this,videoContainer,sizeOfVideo.width,sizeOfVideo.height),wistia_plugin:new WistiaPlugin(this,videoContainer,sizeOfVideo.width,sizeOfVideo.height),sambatech_plugin:new SambatechPlugin(this,videoContainer,sizeOfVideo.width,sizeOfVideo.height),html5:new Html5Video(this,videoContainer,sizeOfVideo.width,sizeOfVideo.height)};this.availableSlidePlugins={slideshareoembed:new SlideShareOEmbed(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),swf:new SwfSlide(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),speakerdeck:new SpeakerDeck(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),image:new ImgSlide(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),iframe:new IFrameSlide(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),rvlio:new RvlIO(this,slideContainer,sizeOfSlide.width,sizeOfSlide.height),none:new NoSlide};this.videoPlugins=[this.availableVideoPlugins.vimeo,this.availableVideoPlugins.youtube,this.availableVideoPlugins.wistia_plugin,this.availableVideoPlugins.sambatech_plugin];this.slidePlugins=[this.availableSlidePlugins.slideshareoembed,this.availableSlidePlugins.swf,this.availableSlidePlugins.speakerdeck,this.availableSlidePlugins.rvlio,this.availableSlidePlugins.none];this.defaultVideoPlugin=this.availableVideoPlugins.html5;this.defaultSlidePlugin=this.availableSlidePlugins.image;this.currentChapterIndex=-1;this.currentSlideIndex=-1;this.listeners={slidechange:[],videochange:[],timechange:[],play:[],pause:[],finish:[]};this.isSynchronized=true}Presentz.prototype.registerVideoPlugin=function(name,plugin){this.availableVideoPlugins[name]=plugin;this.videoPlugins.push(plugin)};Presentz.prototype.registerSlidePlugin=function(name,plugin){this.availableSlidePlugins[name]=plugin;this.slidePlugins.push(plugin)};Presentz.prototype.init=function(presentation){var chapter,i,j,len,len1,ref,ref1,slide;this.presentation=presentation;if(this.intervalSet){this.stopTimeChecker()}this.currentChapterIndex=-1;this.currentSlideIndex=-1;ref=this.presentation.chapters;for(i=0,len=ref.length;i<len;i++){chapter=ref[i];chapter.video._plugin=findVideoPlugin(this,chapter.video);ref1=chapter.slides;for(j=0,len1=ref1.length;j<len1;j++){slide=ref1[j];slide._plugin=findSlidePlugin(this,slide)}if(chapter.duration==null&&chapter.slides!=null&&chapter.slides.length>0){chapter.duration=chapter.slides[chapter.slides.length-1].time+5}}};Presentz.prototype.on=function(eventType,callback){return this.listeners[eventType].push(callback)};Presentz.prototype.changeChapter=function(chapterIndex,slideIndex,play,callback){var i,len,listener,ref,targetChapter,targetSlide;if(callback==null){callback=EMPTY_FUNCTION}targetChapter=this.presentation.chapters[chapterIndex];if(targetChapter==null){return callback("no chapter at index "+chapterIndex)}targetSlide=targetChapter.slides[slideIndex];if(targetSlide==null){return callback("no slide at index "+slideIndex)}if(chapterIndex!==this.currentChapterIndex||this.currentChapterIndex!==-1&&this.presentation.chapters[this.currentChapterIndex].video._plugin.skipTo(targetSlide.time,play)){this.changeSlide(chapterIndex,slideIndex);if(chapterIndex!==this.currentChapterIndex){targetChapter.video._plugin.changeVideo(targetChapter.video,play);targetChapter.video._plugin.skipTo(targetSlide.time,play);ref=this.listeners.videochange;for(i=0,len=ref.length;i<len;i++){listener=ref[i];listener(this.currentChapterIndex,this.currentSlideIndex,chapterIndex,slideIndex)}}this.currentChapterIndex=chapterIndex}callback()};Presentz.prototype.changeSlide=function(chapterIndex,slideIndex){var i,j,len,len1,listener,next4Slides,nextSlide,previousSlideIndex,ref,slide;slide=this.presentation.chapters[chapterIndex].slides[slideIndex];slide._plugin.changeSlide(slide);previousSlideIndex=this.currentSlideIndex;this.currentSlideIndex=slideIndex;next4Slides=this.presentation.chapters[chapterIndex].slides.slice(slideIndex+1,+(slideIndex+5)+1||9e9);for(i=0,len=next4Slides.length;i<len;i++){nextSlide=next4Slides[i];if(nextSlide._plugin.preload!=null){nextSlide._plugin.preload(nextSlide)}}ref=this.listeners.slidechange;for(j=0,len1=ref.length;j<len1;j++){listener=ref[j];listener(this.currentChapterIndex,previousSlideIndex,chapterIndex,slideIndex)}};Presentz.prototype.checkSlideChange=function(currentTime){var candidateSlide,i,j,len,len1,listener,ref,slide,slides;slides=this.presentation.chapters[this.currentChapterIndex].slides;for(i=0,len=slides.length;i<len;i++){slide=slides[i];if(slide.time<=currentTime){candidateSlide=slide}}if(candidateSlide!=null&&slides.indexOf(candidateSlide)!==this.currentSlideIndex){this.changeSlide(this.currentChapterIndex,slides.indexOf(candidateSlide))}ref=this.listeners.timechange;for(j=0,len1=ref.length;j<len1;j++){listener=ref[j];listener(currentTime)}};findVideoPlugin=function(presentz,video){var plugin,plugins;if(video._plugin_id!=null&&presentz.availableVideoPlugins[video._plugin_id]!=null){return presentz.availableVideoPlugins[video._plugin_id]}plugins=function(){var i,len,ref,results;ref=presentz.videoPlugins;results=[];for(i=0,len=ref.length;i<len;i++){plugin=ref[i];if(plugin.handle(video)){results.push(plugin)}}return results}();if(plugins.length>0){return plugins[0]}return presentz.defaultVideoPlugin};findSlidePlugin=function(presentz,slide){var plugin,plugins;if(slide._plugin_id!=null&&presentz.availableSlidePlugins[slide._plugin_id]!=null){return presentz.availableSlidePlugins[slide._plugin_id]}plugins=function(){var i,len,ref,results;ref=presentz.slidePlugins;results=[];for(i=0,len=ref.length;i<len;i++){plugin=ref[i];if(plugin.handle(slide)){results.push(plugin)}}return results}();if(plugins.length>0){return plugins[0]}return presentz.defaultSlidePlugin};Presentz.prototype.synchronized=function(isSynchronized){this.isSynchronized=isSynchronized;if(this.intervalSet&&!this.isSynchronized){this.stopTimeChecker()}if(!this.intervalSet&&this.isSynchronized&&!this.isPaused()){return this.startTimeChecker()}};Presentz.prototype.startTimeChecker=function(){var timeChecker;if(!this.isSynchronized){return}clearInterval(this.interval);this.intervalSet=true;timeChecker=function(_this){return function(){var clazz,plugin;plugin=_this.presentation.chapters[_this.currentChapterIndex].video._plugin;if(plugin instanceof SambatechPlugin){clazz=_this;plugin.player.getStatus(function(p){if(clazz.currentChapterIndex!==-1){return clazz.checkSlideChange(p.status.time)}})}else{if(_this.currentChapterIndex!==-1){_this.checkSlideChange(_this.presentation.chapters[_this.currentChapterIndex].video._plugin.currentTime())}}}}(this);this.interval=setInterval(timeChecker,500)};Presentz.prototype.stopTimeChecker=function(){clearInterval(this.interval);this.intervalSet=false};Presentz.prototype.newElementName=function(prefix){if(prefix!=null){return prefix+"_"+Math.round(Math.random()*1e6)}else{return"element_"+Math.round(Math.random()*1e6)}};Presentz.prototype.pause=function(){if(this.currentChapterIndex!==-1){return this.presentation.chapters[this.currentChapterIndex].video._plugin.pause()}};Presentz.prototype.isPaused=function(){if(this.currentChapterIndex!==-1){return this.presentation.chapters[this.currentChapterIndex].video._plugin.isPaused()}};Presentz.prototype.play=function(){if(this.currentChapterIndex!==-1){return this.presentation.chapters[this.currentChapterIndex].video._plugin.play()}};Presentz.prototype.next=function(){if(this.presentation.chapters[this.currentChapterIndex].slides.length>this.currentSlideIndex+1){this.changeChapter(this.currentChapterIndex,this.currentSlideIndex+1,true);return true}if(this.presentation.chapters.length>this.currentChapterIndex+1){this.changeChapter(this.currentChapterIndex+1,0,true);return true}return false};Presentz.prototype.previous=function(){if(this.currentSlideIndex-1>=0){this.changeChapter(this.currentChapterIndex,this.currentSlideIndex-1,true);return true}if(this.currentChapterIndex-1>=0){this.changeChapter(this.currentChapterIndex-1,this.presentation.chapters[this.currentChapterIndex-1].slides.length-1,true);return true}return false};return Presentz}();root=typeof exports!=="undefined"&&exports!==null?exports:window;if(root.presentz==null){root.presentz={}}root.presentz.Presentz=Presentz;root.Presentz=Presentz}).call(this);